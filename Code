import numpy as np
liste =[]
auto=str(input("veut tu un portefeuille fait automatiquement oui/non ?"))
if auto =="oui" :
    liste =["AAPL","GOOGL","META","XOM","PG","NVDA"]
else :
    nombre=int(input("combien d'actions souhaites tu dans portefeuille ?"))
    for i in range (nombre):
        ticker=str(input("Ex : AAPL,MSFT,AMZN,GOOGL,META,JNJ,JPM,XOM,PG,NVDA"))
        liste.append(ticker)

prices = yf.download(liste, start="2019-01-01", auto_adjust=True)
close = prices["Close"]

logrendjour = np.log(close / close.shift(1))
logrendjour = logrendjour.dropna()
jours =int(input("combien de jours dans l'année ? (marché ouvert)"))

moyenne_jour = logrendjour.mean()
cov_jour = logrendjour.cov()

mu_annuel = moyenne_jour * jours
cov_annuel = cov_jour * jours
ponde = []
somme = 0
while somme !=100:
    for i in range(len(liste)):
        x=int(input(f"choisi la pondération de : {liste[i]} (nombre entier, en %) "))
        ponde.append(x)
        somme = sum(ponde)
        print (somme)
ponde= np.array(ponde)/100
rend_porte = float(ponde @ mu_annuel)
tsr = 0.02
var_porte = float(ponde.T @ cov_annuel @ ponde)
vol_porte = np.sqrt(var_porte)
sharpe = (rend_porte - tsr) / vol_porte
print("Performance du portefeuille")
print(f"\nRendement annuel attendu : {rend_porte:.2%}")
print(f"Volatilité annuelle : {vol_porte:.2%}")
print(f"Ratio de Sharpe : {sharpe:.2f}")
